"use strict";(self.webpackChunkstore=self.webpackChunkstore||[]).push([[203],{514:(t,e,n)=>{n.r(e),n.d(e,{StoreProvider:()=>I,authMiddleware:()=>k,store:()=>x,useAttackChains:()=>E,useIdentity:()=>j,useStore:()=>S});var r,a,o,i=n(82),s=n(820),l=n.n(s),u=n(752),c=n(980),f=(0,c.oM)({name:"error",initialState:{message:null},reducers:{reset:function(t){t.message=null},setErrorMessage:function(t,e){t.message=e.payload.message}}}),p=((r=f.actions).reset,r.setErrorMessage),h=(0,c.oM)({name:"identity",initialState:{email:null,password:null,jwt:null,refresh:null,status:null,loading:!1},reducers:{loading:function(t){t.loading=!0},signIn:function(t,e){t.email=e.payload.email,t.jwt=e.payload.jwt,t.refresh=e.payload.refresh,t.status=e.payload.status,t.loading=!1}}}),d=(a=h.actions).signIn,y=a.loading,v=(0,c.oM)({name:"attackChains",initialState:{data:[],limit:null,total_items:null,total_items_per_passfail:null,status:null,loading:!1},reducers:{loading:function(t){t.loading=!0},reset:function(t){t.data=[]},set:function(t,e){t.data=e.payload.data,t.limit=e.payload.limit,t.total_items=e.payload.total_items,t.total_items_per_passfail=e.payload.total_items_per_passfail,t.status=e.payload.status,t.loading=e.payload.loading}}}),w=((o=v.actions).reset,o.loading),m=o.set,b=n(292),g=function(){return g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},g.apply(this,arguments)},_=b.Z.withExtraArgument({api:{identity:new function(t){var e=this;this.signIn=function(t){return n=e,r=void 0,o=function(){var e,n;return function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch(this.url+"/user/session",{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})})];case 1:return[4,r.sent().json()];case 2:return"success"===(null==(e=r.sent())?void 0:e.status)?[2,{email:t.email||"system_testing@orca.security",jwt:e.jwt.access,refresh:e.jwt.refresh,status:e.status}]:[2,{error:new Error(null==e?void 0:e.error),type:"signIn"}];case 3:throw n=r.sent(),Error(n.message);case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function i(t){try{l(o.next(t))}catch(t){e(t)}}function s(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(i,s)}l((o=o.apply(n,r||[])).next())}));var n,r,a,o},this.url=t}("https://api.orcasecurity.io/api"),sonar:new function(t){var e=this;this.toParams=function(t){return new URLSearchParams(g({},t))},this.query=function(t){return n=e,r=void 0,o=function(){var e,n,r;return function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),e=localStorage.getItem("jwt"),[4,fetch(this.url+"/sonar/query?"+this.toParams({query:t,standard_format:!0}),{headers:{authorization:"Bearer ".concat(e)}})];case 1:return[4,a.sent().json()];case 2:return"success"===(null==(n=a.sent())?void 0:n.status)?[2,{data:null==n?void 0:n.data,limit:null==n?void 0:n.limit,total_items:null==n?void 0:n.totel_items,total_items_per_passfail:null==n?void 0:n.total_items_per_passfail,status:null==n?void 0:n.status}]:[2,{error:new Error(null==n?void 0:n.error),type:"query"}];case 3:throw r=a.sent(),Error(r.message);case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(t,e){function i(t){try{l(o.next(t))}catch(t){e(t)}}function s(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(i,s)}l((o=o.apply(n,r||[])).next())}));var n,r,a,o},this.url=t}("https://api.orcasecurity.io/api")}}),k=function(t){return function(e){return function(n){try{var r=t.getState().identity.jwt;localStorage.setItem("jwt",r)}catch(t){localStorage.clear()}finally{e(n)}}}},x=(0,c.xC)({reducer:{identity:h.reducer,error:f.reducer,attackChains:v.reducer},middleware:[_,k]});function S(t){var e,n=(0,i.v9)((function(e){return e[t]}));return(e={})[t]=n,e}function j(){var t=(0,i.v9)((function(t){return t.identity})),e=(0,i.I0)();return{identity:t,signIn:function(t,n){return e(function(t,e){return function(n,r,a){return o=void 0,i=void 0,l=function(){var r,o,i;return function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(s){switch(s.label){case 0:r=a.api,s.label=1;case 1:return s.trys.push([1,3,,4]),n(y()),[4,r.identity.signIn({email:t,password:e})];case 2:return(o=s.sent()).error?n(p({message:o.error.message})):n(d({email:t,jwt:o.jwt,refresh:o.refresh,status:o.status,loading:!1})),[3,4];case 3:return i=s.sent(),console.error(i),[3,4];case 4:return[2]}}))},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{a(l.next(t))}catch(t){e(t)}}function r(t){try{a(l.throw(t))}catch(t){e(t)}}function a(e){var a;e.done?t(e.value):(a=e.value,a instanceof s?a:new s((function(t){t(a)}))).then(n,r)}a((l=l.apply(o,i||[])).next())}));var o,i,s,l}}(t,n))}}}function E(){var t=(0,i.v9)((function(t){return t.attackChains})),e=(0,i.I0)();return{attackChains:t,fetchAttackChains:function(){return e((function(t,e,n){return r=void 0,a=void 0,i=function(){var e,r,a;return function(t,e){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=e.call(t,i)}catch(t){o=[6,t],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(o){switch(o.label){case 0:e=n.api,o.label=1;case 1:return o.trys.push([1,3,,4]),t(w()),[4,e.sonar.query("AttackPath")];case 2:return(r=o.sent()).error?t(p({message:r.error.message})):(console.log(r),t(m({data:r.data,limit:r.limit,total_items:r.total_items,total_items_per_passfail:r.total_items_per_passfail,status:r.status,loading:!1}))),[3,4];case 3:return a=o.sent(),console.error(a),[3,4];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{l(i.next(t))}catch(t){e(t)}}function s(t){try{l(i.throw(t))}catch(t){e(t)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(n,s)}l((i=i.apply(r,a||[])).next())}));var r,a,o,i}))}}}function I(t){var e=t.children;return l().createElement(i.zt,{store:x},l().createElement(u.BrowserRouter,null,e))}}}]);